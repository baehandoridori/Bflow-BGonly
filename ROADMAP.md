# ROADMAP.md — Bflow 프로덕션 현황 관리 도구 개발 로드맵

> **최종 갱신**: 2026-02-21 (Phase 2 완료, Phase 6 착수 예정)
> **프로젝트**: Bflow (Studio JBBJ 프로덕션 진행 현황 대시보드)
> **담당**: Claude × 한솔 (Studio JBBJ)
> **현재 상태**: Phase 1~2 완료 → **Phase 6 (멀티 부서 확장) 착수 예정**

---

## 범례

| 표기 | 의미 |
|------|------|
| `[완료]` | 구현 완료, 운영 중 |
| `[진행]` | 현재 구현 중 |
| `[다음]` | 다음 착수 예정 |
| `[ ]` | 미착수 |
| `P1` ~ `P7` | 개발 페이즈 |
| `난이도: ●○○` | 낮음 / `●●○` 중간 / `●●●` 높음 |

---

## 전체 진행 현황 (Overview)

```
Phase 1: 핵심 씬 관리         ██████████ 완료 ✅
Phase 2: 이미지 리뷰           ██████████ 완료 ✅
Phase 3: 알림 & 협업           ░░░░░░░░░░ 미착수
Phase 4: 뷰 확장               ░░░░░░░░░░ 미착수
Phase 5: 커스터마이징           ░░░░░░░░░░ 미착수
Phase 6: 멀티 부서 확장        ▶░░░░░░░░░ 다음 착수 ⭐
Phase 7: 대시보드 UX 혁신      ░░░░░░░░░░ 미착수
```

---

## Phase 1: 핵심 씬 관리 강화 `[완료]`

> **목표**: 현재 씬 목록 뷰의 가시성과 조작성을 프로덕션 수준으로 끌어올린다.
> **영향도**: 매일 쓰는 핵심 워크플로우 직접 개선. 체감 효과 즉시.
> **완료일**: 2026-02-19

### 1-1. 씬 목록 정렬 및 가시성 개선 `P1` `[완료]`

> 난이도: ●●○ | 참고: ftrack 멀티레벨 그룹핑, Kitsu 상태 매트릭스

- [x] **정렬 옵션 드롭다운**: 씬번호순 (기본), 담당자순, 진행률순, 미완료 우선
- [x] **정렬 방향 토글**: 오름차순 ↑ / 내림차순 ↓
- [x] **상태 필터 칩**: "미착수", "진행중", "완료" 등 빠른 필터 (담당자 필터와 병렬)
- [x] **컬러 코딩 강화**: 진행률에 따른 카드 좌측 보더 컬러 (0%=빨강, 50%=노랑, 100%=초록)
- [x] **리스트 뷰 / 카드 뷰 토글**: 카드(현재) + 테이블(밀집 정보) 전환

```
UX 참고:
- ftrack: 스프레드시트/썸네일 레이아웃 토글 + 멀티레벨 그룹핑 툴바
- Kitsu: 씬(행) × 단계(열) 컬러 매트릭스 — 가장 정보밀도 높은 뷰
- ShotGrid: 리스트/썸네일/디테일 3단 토글
```

### 1-2. 레이아웃별 씬 그룹핑 `P1` `[완료]`

> 난이도: ●●● | 핵심 기능 — BG 작업은 레이아웃 단위로 진행되므로 필수

- [x] **레이아웃 번호 필드 추가**: Scene 타입에 `layoutId: string` 필드 추가
  - 카드에서 클릭하여 편집 가능, 테이블 뷰에도 컬럼 추가
- [x] **레이아웃별 뷰**:
  - 레이아웃 번호로 그룹핑 → 각 그룹 안에 해당 씬 카드/테이블 나열
  - 레이아웃 헤더에 해당 그룹 진행률 표시
  - 예: `레이아웃 #1 — a001, a004 (진행률 75%)`
- [x] **씬번호별 뷰**: 기존 씬번호 순서대로 플랫하게 나열 (현재 방식)
- [x] **뷰 전환 토글**: 상단 바에 `씬번호별` / `레이아웃별` 아이콘 토글

```
데이터 구조 변경:
  Scene {
    ...existing,
    layoutId: string;  // 쉼표 구분: "a001, a008, a009"
  }

파싱 로직:
  layoutId.split(',').map(s => s.trim()).filter(Boolean)
  → ['a001', 'a008', 'a009'] 각각 클릭 가능한 태그
```

### 1-3. 씬번호 입력 개선 `P1` `[완료]`

> 난이도: ●●○ | 참고: 드롭다운 기반 입력으로 오타 방지

- [x] **접두사 드롭다운**: `a` / `b` / `c` / `d` / `sc` 등 알파벳 프리픽스 선택
- [x] **자동 번호 제안**: 선택된 프리픽스의 기존 번호 중 빈 번호를 자동 입력
  - 예: a001, a002, a004 존재 시 → 다음 제안값 `a003`
- [x] **수동 번호 입력**: 드롭다운 옆 숫자 입력 필드 (제안값이 기본 채워짐)
- [x] **중복 검사**: 이미 존재하는 씬번호 입력 시 경고 + 추가 버튼 비활성화
- [x] **연속 입력 지원**: 추가 후 폼 유지, 다음 번호 자동 채움, Enter/Esc 키보드 지원

### 1-4. 버전 표기 시스템 `P1` `[완료]`

> 난이도: ●○○ | 빠른 구현 가능

- [x] **package.json 버전 활용**: `version` 필드를 `__APP_VERSION__`으로 Vite define
- [x] **사이드바 하단 표기**: `[TEST]` 모드 표시 아래에 `v0.1.0` 표기
- [ ] **업데이트 시 자동 증가**: 빌드/배포 시 버전 태그 갱신
- [ ] **변경 내역 표시**: 설정 뷰에서 최근 업데이트 내역 확인 가능

```
표시 위치:
  사이드바 하단
  ┌─────────────┐
  │  ...메뉴...   │
  │              │
  │  [TEST]      │
  │  v1.2.0      │
  └─────────────┘
```

---

## Phase 2: 이미지 확인 및 리뷰 시스템 `[완료]`

> **목표**: BG 작업 특성상 이미지 확인이 필수. 씬 카드에서 바로 이미지를 보고 비교할 수 있게.
> **영향도**: BG 아티스트와 감독의 리뷰 워크플로우 혁신.
> **완료일**: 2026-02-20

### 2-1. 씬 이미지 업로드 및 미리보기 `P2` `[완료]`

> 난이도: ●●● | 참고: Kitsu 클립보드 붙여넣기, ftrack 드래그&드롭

- [x] **이미지 타입 2종**: 스토리보드 이미지 + 가이드(예시) 이미지
- [x] **업로드 방식 3종**:
  - 클립보드 붙여넣기 (`Ctrl+V`) — 카드에 포커스 후 붙여넣기
  - 드래그 & 드롭 — 파일을 카드 위에 드래그 (파란색 오버레이)
  - 파일 선택 다이얼로그 — SB/가이드 버튼 클릭
- [x] **씬 카드 썸네일**: 작은 미리보기 표시 (스토리보드/가이드 나란히)
- [x] **확대 보기**: 클릭 시 모달로 원본 크기 이미지 표시
- [x] **이미지 저장 전략**:
  - 로컬 저장: `%APPDATA%/Bflow-BGonly/images/{sheetName}/` 디렉토리
  - `local-image://` 커스텀 프로토콜로 렌더러에서 표시
  - 파일 경로를 `storyboardUrl`/`guideUrl` 필드에 저장

### 2-2. 이미지 비교 뷰 `P2` `[완료]`

> 난이도: ●●○ | 참고: ftrack 오버레이 비교, Kitsu 사이드바이사이드

- [x] **사이드 바이 사이드**: 스토리보드 vs 가이드 이미지 병렬 표시
- [x] **오버레이 비교**: 두 이미지를 겹쳐 놓고 불투명도 슬라이더로 전환
- [x] **확대/축소**: 줌 인/아웃 버튼 (25% 단위, 25%~400%)
- [ ] **버전 비교**: 같은 씬의 이전 버전과 현재 버전 비교 (향후)

### 2-3. 진행률 100% 완료 인터랙션 `P2` `[완료]`

> 난이도: ●○○ | 참고: Asana 완료 축하 애니메이션

- [x] **씬 완료 애니메이션**: 4단계 모두 체크 시 카드에 컨페티 파티클 효과 (framer-motion)
- [ ] **파트 완료 축하**: 파트 내 모든 씬 완료 시 프로그레스 바에 빛나는 효과 (향후)
- [ ] **에피소드 완료 마일스톤**: 에피소드 전체 완료 시 화면 전체 축하 애니메이션 (향후)
- [ ] **설정에서 토글 가능**: 개인 설정에서 on/off (향후)

---

## Phase 3: 알림 및 협업 시스템

> **목표**: 팀원 간 커뮤니케이션을 앱 안에서 해결. 슬랙과 연동하여 알림 흐름 구축.
> **영향도**: 감독 ↔ 아티스트 간 리뷰 요청/피드백 루프 자동화.

### 3-1. 태그 및 확인요청 버튼 `P3`

> 난이도: ●●○

- [ ] **확인요청 버튼**: 씬 카드에 "확인요청" 버튼 추가
  - 클릭 → 해당 씬의 상태가 "검수 대기"로 변경
  - 담당 감독에게 알림 발송 (앱 내 + 슬랙)
- [ ] **태그 시스템**: 씬에 태그 추가 가능 (`수정필요`, `참고`, `급함` 등)
  - 미리 정의된 태그 + 커스텀 태그
  - 태그별 색상 구분
- [ ] **이름 입력 후 태그 시 알림**: 담당자 변경 또는 태그 시 해당 인원에게 알림

### 3-2. 슬랙 웹훅 연동 `P3`

> 난이도: ●●● | 참고: Kitsu 네이티브 Slack 연동

- [ ] **슬랙 Incoming Webhook 설정**: 설정 뷰에서 웹훅 URL 입력
- [ ] **알림 트리거 설정**:
  - 확인요청 시 → 슬랙 채널에 메시지 발송
  - 태그 시 → 해당 사용자에게 DM 또는 멘션
  - 씬 상태 변경 시 → 채널 알림 (선택 가능)
- [ ] **슬랙 워크플로 연동**: 슬랙 워크플로 빌더와 연계 가능한 페이로드 포맷
- [ ] **알림 메시지 포맷**:

```
📋 BG 확인요청
• 에피소드: EP.03  파트: B
• 씬: a015  담당자: 김하늘
• 요청자: 원동우
• 상태: 완료 → 검수 대기
[앱에서 확인하기]
```

```
UX 참고:
- Kitsu: 사용자별 Slack/Discord 토글 (개인 프로필에서 설정)
- ftrack: @멘션 → 알림 자동 발송 (버전 제작자 자동 포함)
- 핵심: 상태 변경 → 알림이 자동이어야 함. 수동 알림은 잊힘.
```

---

## Phase 4: 뷰 확장 (에피소드 / 캘린더 / 인원별)

> **목표**: 대시보드 외 추가 뷰를 구현하여 다각도 현황 파악 가능하게.
> **영향도**: 감독과 PD가 전체 프로덕션을 한눈에 파악.

### 4-1. 에피소드별 현황 뷰 `P4`

> 난이도: ●●○ | 현재 "구현 예정" placeholder 존재

- [ ] **에피소드 카드 그리드**: 각 에피소드를 카드로 표시
  - 에피소드 번호, 전체 진행률, 파트별 미니 프로그레스 바
  - 클릭 → 해당 에피소드의 씬 목록 뷰로 이동
- [ ] **파트별 매트릭스**: 에피소드 × 파트 테이블 (셀: 진행률 %)
- [ ] **타임라인 바**: 에피소드별 작업 기간 + 완료 예상일

### 4-2. 캘린더 뷰 `P4`

> 난이도: ●●● | 참고: Kitsu 간트 자동생성, ftrack 타임라인 줌

- [ ] **월간/주간 캘린더**: 에피소드 마감일, 마일스톤 표시
- [ ] **간트 차트 (선택)**: 에피소드/파트별 작업 기간 시각화
- [ ] **마감일 경고**: D-3, D-1 시 색상 변경 (노랑 → 빨강)
- [ ] **대시보드 위젯**: 메인 대시보드에 미니 캘린더 위젯 추가

```
UX 참고:
- Kitsu: 예상 작업시간 + 시작일 입력 → 간트 자동 생성, "지연=빨강" 모드
- ftrack: 타임라인 줌 핸들로 날짜 범위 확대/축소
- ShotGrid: 간트 + 리소스 플래닝 뷰 (과할 수 있으므로 간트만 우선)
```

### 4-3. 인원별 태스크 뷰 `P4`

> 난이도: ●●○ | 참고: ftrack My Tasks, Kitsu 퀴타 추적

- [ ] **씬 카드에서 이름 클릭 → 인원별 뷰 전환**
- [ ] **인원별 대시보드**:
  - 해당 담당자의 전체 씬 목록
  - 단계별 진행률 (LO 몇 개 / 완료 몇 개 / 검수 몇 개 / PNG 몇 개)
  - 파트별 분포 차트
- [ ] **생산성 지표 (선택)**: 주간 완료 씬 수 추이

```
UX 참고:
- ftrack: My Tasks가 로그인 후 첫 화면, 칸반 + 활동 피드 + 다가오는 마감
- Kitsu: 인원별 일일 쿼터 (목표 씬 수 대비 실제 완료 수)
```

### 4-4. 메인 대시보드 강화 `P4`

> 난이도: ●●○

- [ ] **담당자별 세부 진행률**: 현재는 씬 완성 시에만 % 반영 → 단계별 세분화
  - 예: 김하늘 — LO: 80%, 완료: 60%, 검수: 40%, PNG: 20% → 종합: 50%
- [ ] **미니 캘린더 위젯**: 대시보드에 이번 주/다음 주 마감일 표시
- [ ] **최근 활동 피드**: "원동우가 EP03_B a015의 LO를 완료" 등 실시간 로그

---

## Phase 5: 커스터마이징 및 확장성

> **목표**: 프로젝트별 / 팀별 맞춤 설정 가능하게. 향후 파이프라인 변경에 유연하게 대응.
> **영향도**: 장기적 유지보수성과 다른 프로젝트 재활용성 확보.

### 5-1. 커스텀 파이프라인 단계 `P5`

> 난이도: ●●● | 참고: ftrack 워크플로 스키마, Kitsu 시맨틱 상태 플래그

현재 `LO → 완료 → 검수 → PNG` 4단계 고정 → 커스텀 단계 추가/제거 가능하게.

- [ ] **단계 설정 UI**: 설정 뷰에서 단계 추가/삭제/순서 변경
  - 각 단계: 이름, 색상, 시맨틱 플래그 (IS_DONE, IS_FEEDBACK_REQUEST 등)
- [ ] **동적 열 생성**: Google Sheets에 새 열 자동 추가 (GAS에서 처리)
- [ ] **기존 데이터 호환**: 새 단계 추가 시 기존 씬은 해당 단계가 `false`로 초기화
- [ ] **타입 시스템 업데이트**: Stage 타입을 고정 유니온 → 동적 배열로 변경

```
데이터 구조 변경:
  현재: Stage = 'lo' | 'done' | 'review' | 'png'  (하드코딩)
  변경: stages: StageConfig[] = [
    { id: 'lo', label: 'LO', color: '#74B9FF', order: 0 },
    { id: 'done', label: '완료', color: '#A29BFE', order: 1 },
    ...커스텀 단계 추가 가능
  ]

UX 참고:
- ftrack: 워크플로 스키마 → 프로젝트별 다른 단계 세트 할당 가능
- Kitsu: IS_DONE, IS_DEFAULT, IS_FEEDBACK_REQUEST 등 시맨틱 플래그로 동작 제어
```

### 5-2. 동기화 최적화 `P5`

> 난이도: ●●○

- [ ] **폴링 주기 설정**: 설정에서 30초 / 1분 / 3분 / 5분 선택 가능
  - 기본값: 1분 (GAS 일일 실행 한도 고려)
  - GAS 무료 한도: ~20,000회/일 → 20명 × 1분 폴링 = ~28,800회/일 (주의 필요)
- [ ] **diff 기반 업데이트**: 전체 재렌더링 대신 변경된 씬만 업데이트
- [ ] **변경 감지 해시**: 서버 응답에 해시 포함 → 변경 없으면 UI 업데이트 스킵
- [ ] **앱 포커스 기반 폴링**: 앱이 포커스 상태일 때만 빈번하게, 백그라운드에서는 느리게

```
GAS 리소스 계산:
  20명 × 60분/시간 × 8시간/일 = 9,600회/일 (1분 주기)
  20명 × 30분/시간 × 8시간/일 = 4,800회/일 (2분 주기)
  → 1분 주기도 GAS 무료 한도(20,000) 이내. 안전.

최적화 전략:
  1. ETag/해시 기반: 변경 없으면 UI 스킵 (네트워크 비용만)
  2. 포커스 기반: 백그라운드 앱은 5분 주기로 전환
  3. 낙관적 업데이트: 이미 적용 완료 (현재 구현)
```

---

## Phase 6: 멀티 부서 확장 — BG + 액팅 + 컴포지팅 `[다음]` `[중요]`

> **목표**: 현재 BG 전용 앱을 BG + 액팅 + 컴포지팅까지 통합 관리 가능한 프로덕션 현황 도구로 확장한다.
> **영향도**: 앱의 근본적 아키텍처 확장. 프로젝트 전체를 한 곳에서 관리하는 핵심 전환점.
> **상태**: 착수 예정 (기획 완료, 일부 미정 사항 있음)
> **착수 결정**: 2026-02-21 — Phase 3~5를 건너뛰고 Phase 6 우선 진행 결정

### 핵심 데이터 계층 구조

```
프로젝트 (Project)
 └─ 에피소드 (EP01, EP02, EP03, ...)
     └─ 파트 (A, B, C, ... — 파트별로 나뉠 시)
         ├─ BG (배경)
         │   └─ BG 씬 목록 (a001, a002, b001, ...)
         │       └─ 단계: LO → 완료 → 검수 → PNG (현재 4단계)
         │
         ├─ 액팅 (Acting)
         │   └─ 액팅 씬 목록 (a001, a002, b001, ...)
         │       └─ 단계: 미정 (4~5단계, 커스텀 가능)
         │
         └─ 컴포지팅 (Compositing) — 향후 결정
             └─ 관리 범위/방식 미정
```

**핵심 포인트**: 같은 씬번호(예: `a001`)가 BG와 액팅 양쪽에 존재하며, 각 부서별로 독립적인 진행률을 관리한다.

### 6-1. 부서(Department) 개념 도입 `P6` `[중요]`

> 난이도: ●●● | 앱 전체 아키텍처에 영향

- [ ] **Department 타입 추가**: `'bg' | 'acting' | 'compositing'`
  - 현재 모든 코드가 BG를 가정 → 부서 파라미터를 전역적으로 추가
  - `types/index.ts`에 `Department` 타입, `Scene`에 `department` 필드
- [ ] **부서별 파이프라인 단계**: 각 부서마다 다른 단계 세트 가능
  - BG: `LO → 완료 → 검수 → PNG` (현재)
  - 액팅: 미정 (4~5단계) — 커스텀 단계 (P5의 5-1과 연계)
  - 컴포지팅: 향후 결정
- [ ] **부서 전환 UI**: 사이드바 또는 탭으로 BG ↔ 액팅 전환
  - 씬 목록 뷰에서 부서 탭 (BG | 액팅)
  - 같은 에피소드/파트 내에서 부서만 전환
- [ ] **씬 카드에 부서 표시**: 카드에 부서 뱃지 (BG/ACT) 표시
  - 통합 뷰에서 BG와 액팅 씬을 함께 볼 때 구분용

```
타입 변경:
  type Department = 'bg' | 'acting' | 'compositing';

  interface Scene {
    ...existing,
    department: Department;  // 어느 부서의 씬인지
  }

  interface StageConfig {
    id: string;
    label: string;
    color: string;
    order: number;
  }

  interface DepartmentConfig {
    id: Department;
    label: string;           // '배경', '액팅', '컴포지팅'
    stages: StageConfig[];   // 부서별 파이프라인 단계
    color: string;           // 부서 구분 컬러
  }

UI 전환:
  ┌─────────────────────────────────────┐
  │  EP03 · B파트                        │
  │  ┌─────┐ ┌─────┐ ┌──────────┐      │
  │  │ BG  │ │ 액팅 │ │ 컴포지팅  │      │
  │  └─────┘ └─────┘ └──────────┘      │
  │  ─────────────────────────────      │
  │  [씬 목록: 선택된 부서의 씬들]        │
  └─────────────────────────────────────┘
```

### 6-2. 데이터 소스 구조 설계 `P6`

> 난이도: ●●○ | 미정 사항 — 아래 추천안 참고

**현재 상태**: BG만 관리, 시트 이름 `EP{n}_{part}` (예: `EP03_B`)

**⚠️ 미정 사항**: 스프레드시트 구조를 어떻게 할 것인가?

#### 추천안: 프로젝트당 1개 스프레드시트 + 시트 이름 확장

에피소드당 100~150컷 기준, 아래 구조 추천:

```
[스프레드시트 1개 = 프로젝트 1개]

시트 이름 규칙: EP{n}_{part}_{dept}
  EP03_B_BG    ← EP03 B파트 배경 씬 (현재 EP03_B에 해당)
  EP03_B_ACT   ← EP03 B파트 액팅 씬
  EP03_C_BG    ← EP03 C파트 배경 씬
  EP03_C_ACT   ← EP03 C파트 액팅 씬
  ...

하위 호환: 기존 EP03_B → EP03_B_BG로 매핑 (또는 _BG 없으면 BG로 간주)
```

- [ ] **시트 이름 파싱 확장**: `EP{n}_{part}` → `EP{n}_{part}_{dept}`
  - 하위 호환: `_BG` / `_ACT` 접미사 없으면 BG로 기본 간주
  - GAS(Apps Script)에서 부서별 시트 자동 생성 지원
- [ ] **스프레드시트 구조 결정**: (확정 필요)
  - 옵션 A: 프로젝트당 1개 스프레드시트 (추천 — 단일 연결, 크로스 부서 조회 쉬움)
  - 옵션 B: 에피소드당 1개 스프레드시트 (데이터 분산, 대형 프로젝트 시 유리)
  - 옵션 C: 부서당 1개 스프레드시트 (부서 독립성 높음)

```
규모 추정 (옵션 A 기준):
  에피소드당: ~150컷 × 2부서 = ~300행
  20 에피소드: ~6,000행 (스프레드시트 제한 500만 셀 대비 매우 여유)
  시트 수: 20 EP × 3~4 파트 × 2 부서 = ~160 시트 (충분히 관리 가능)
  → 프로젝트당 1개로 충분
```

### 6-3. 대시보드 멀티 부서 위젯 `P6`

> 난이도: ●●○

- [ ] **BG 진행 현황 위젯**: 현재 대시보드의 BG 진행률 (기존)
- [ ] **액팅 진행 현황 위젯**: 액팅 부서의 전체 진행률
  - BG 위젯과 동일한 구조, 다른 데이터 소스
- [ ] **에피소드 통합 진행률**: BG + 액팅을 합산한 에피소드 진행률
  - 계산: `(BG 진행률 + 액팅 진행률) / 2` 또는 가중 평균
  - 비주얼: BG와 액팅을 컬러로 구분한 스택 프로그레스 바
- [ ] **프로젝트 전체 진행률**: 모든 에피소드의 통합 진행률
  - 에피소드별 진행률의 평균 또는 가중 평균
  - 프로젝트 수준의 최상위 요약 위젯

```
위젯 계층 구조:

  ┌─ 프로젝트 진행률 ──────────┐
  │  ████████████░░░░ 62%     │
  │  (12개 EP 평균)            │
  └───────────────────────────┘
           ▲ 합산
  ┌─ EP03 통합 ────────────────┐
  │  BG:  ████████░░░ 72%     │
  │  액팅: ██████░░░░░ 52%     │
  │  통합: ███████░░░░ 62%     │
  └───────────────────────────┘
           ▲ 합산
  ┌─ BG 진행률 ─┐  ┌─ 액팅 진행률 ─┐
  │  72%        │  │  52%          │
  │  (기존)     │  │  (신규)       │
  └─────────────┘  └───────────────┘
```

### 6-4. 액팅 씬 관리 `P6`

> 난이도: ●●○ | 기존 BG 씬 관리 로직을 부서별로 확장

- [ ] **액팅 씬 추가/삭제**: BG와 동일한 UX로 액팅 씬 CRUD
  - 같은 `AddSceneForm` 재사용, 부서 파라미터만 다름
  - 씬번호 중복 검사는 같은 부서 내에서만 수행
- [ ] **액팅 씬 카드/테이블**: 기존 SceneCard/SceneTable을 부서별 단계에 맞게 렌더링
  - BG: LO, 완료, 검수, PNG 체크박스
  - 액팅: 커스텀 단계 체크박스 (설정에 따라 동적)
- [ ] **액팅 이미지**: 액팅 씬도 이미지 업로드/비교 지원
  - 이미지 타입이 다를 수 있음 (원화, 동화 등 — 향후 설정)
- [ ] **통합 씬 뷰 (선택)**: BG + 액팅 씬을 한 화면에서 비교
  - 같은 씬번호의 BG 진행률 vs 액팅 진행률을 나란히 표시

```
통합 뷰 (예시):
  씬번호 │ BG 진행률        │ 액팅 진행률
  ───────┼─────────────────┼─────────────────
  a001   │ ████ 100% ✅    │ ███░ 75%
  a002   │ ██░░ 50%        │ █░░░ 25%
  a003   │ ░░░░ 0%         │ ██░░ 50%
```

### 6-5. 컴포지팅 (향후 결정) `P6`

> 난이도: 미정 | BG + 액팅 완료 후의 합성 단계

- [ ] **관리 범위 결정**: (추후 확정 필요)
  - 옵션 A: 씬별 완료/미완료 체크만
  - 옵션 B: 별도 관리 불필요 (BG+액팅만으로 충분)
  - 옵션 C: 컴포지팅 전용 단계/워크플로우
- [ ] **대시보드 반영**: 컴포지팅 관리 시 프로젝트 진행률에 포함

```
구현 순서 (확정):
  Step 1: 부서 개념 도입 (타입 시스템 + UI 전환) ← 아키텍처 기반
  Step 2: 데이터 소스 구조 확장 (시트 이름 + GAS) ← 데이터 연동
  Step 3: 액팅 씬 관리 (BG 로직 확장 재사용) ← 핵심 기능
  Step 4: 대시보드 멀티 부서 위젯 ← 시각화
  Step 5: 컴포지팅 (필요 시) ← 향후 결정

  ※ 액팅 파이프라인 단계는 초기에 4단계 하드코딩 후,
     Phase 5-1(커스텀 단계)에서 동적으로 변경 가능하게 확장 예정.
```

---

## Phase 7: 대시보드 UX 혁신 & UI 폴리시

> **목표**: 대시보드를 위젯 기반 커스터마이징 가능한 OS 수준 UX로 끌어올리고, 앱 전체의 시각적 통일성과 세련된 느낌을 확보한다.
> **영향도**: 일상 사용 경험의 질적 도약. 바탕화면 위젯으로 앱을 안 열고도 현황 파악 가능.

### 7-1. 대시보드 위젯 레이아웃 편집 `P7`

> 난이도: ●●● | 참고: iOS 홈 화면 편집, Windows 위젯 보드

- [ ] **레이아웃 편집 모드**: "레이아웃 편집" 버튼 클릭 시 진입
  - 모든 위젯이 **iPhone 스타일로 부들부들(wiggle) 흔들림** 애니메이션
  - `@keyframes wiggle` + framer-motion으로 자연스러운 떨림
  - 각 위젯 좌상단에 `−` 삭제 버튼, 빈 슬롯에 `+` 추가 버튼
- [ ] **위젯 추가/제거**: 편집 모드에서 불필요한 위젯 제거, 새 위젯 추가 가능
  - 위젯 목록 팝오버 (사용 가능한 위젯 그리드)
  - 드래그로 위치 변경 (react-grid-layout 연동)
- [ ] **위젯 내 스크롤바 제거**: 위젯 크기에 맞게 콘텐츠 자동 축약/잘라내기
  - 특정 위젯(예: 활동 피드)만 스크롤 허용, 나머지는 콘텐츠 fit
  - `overflow-hidden` + 텍스트 말줄임 + 반응형 폰트 축소
- [ ] **레이아웃 저장**: 사용자별 위젯 배치 설정 로컬 저장 (JSON)
- [ ] **편집 완료**: 편집 모드 나가면 wiggle 멈추고 레이아웃 고정

```
UX 참고:
- iOS: 앱 아이콘 길게 눌러 편집 모드 → 흔들리면서 ×버튼 표시
- Windows 위젯 보드: 위젯 추가/크기 변경/재배치
- 핵심: 편집 모드 진입/퇴출이 명확하고, 위젯 조작이 직관적이어야 함
```

### 7-2. 데스크탑 AOT 플로팅 위젯 `P7`

> 난이도: ●●● | 참고: Windows 위젯, macOS 데스크탑 위젯, Rainmeter

- [ ] **위젯 팝아웃 기능**: 대시보드에서 특정 위젯의 "팝아웃" 버튼 클릭
  - 해당 위젯만 별도의 **Electron BrowserWindow**로 분리
  - `alwaysOnTop: true`, `frame: false`, `transparent: true`
  - 바탕화면 위에 떠다니는 독립 윈도우
- [ ] **글래스모피즘 디자인**:
  - `backdrop-filter: blur(20px)` + 반투명 배경 (`rgba(0,0,0,0.4)`)
  - 뒤가 뿌옇게 비치는 세련된 유리 효과
  - 미세한 보더 + 그림자로 입체감
- [ ] **프레임리스 윈도우**: 프로그램 타이틀바 (ㅡ ㅁ X) 없이 위젯만 표시
  - 드래그 영역은 위젯 상단 얇은 핸들 바 (마우스 호버 시만 표시)
  - 우클릭 → 컨텍스트 메뉴 (닫기, 크기 조절, 투명도 조절)
- [ ] **위젯 선택**: 하나의 위젯만 선택하여 팝아웃 가능
  - 에피소드 요약, 전체 진행률, 담당자별 현황 등 중 택 1
  - 실시간 데이터 동기화 유지 (메인 앱과 동일한 store 참조)
- [ ] **위치/크기 기억**: 팝아웃 위젯의 화면 위치와 크기를 저장

```
Electron 구현:
  const widgetWin = new BrowserWindow({
    width: 320, height: 240,
    alwaysOnTop: true,
    frame: false,
    transparent: true,
    resizable: true,
    skipTaskbar: true,  // 작업표시줄에 안 보임
    webPreferences: { ... }
  });
  widgetWin.loadURL(`app://widget?type=progress`);

디자인:
  ┌─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┐   ← 유리 효과, 프레임 없음
  │  ≡ 전체 진행률          │   ← 상단 핸들 (드래그 영역)
  │  ████████░░░░ 67%      │
  │  EP03 B파트 — 12/18 씬  │
  │  💬 화이팅! 거의 다 왔어! │
  └─ ─ ─ ─ ─ ─ ─ ─ ─ ─ ─┘
```

### 7-3. 진행률 동기부여 메시지 `P7`

> 난이도: ●○○ | 참고: Duolingo 격려 메시지, 게임 업적 시스템

- [ ] **진행률 구간별 랜덤 메시지**: 전체 진행률 위젯 하단에 표시
  - `0%` — "시작이 반이에요! 화이팅!", "첫 발을 내딛었습니다!", "빈 캔버스가 가장 설레는 순간!"
  - `1~10%` — "씨앗을 심었어요, 잘 자랄 거예요!", "시작이 좋습니다!"
  - `10~20%` — "이때가 제일 성과가 안 보이지만, 지금 땅을 단단히 다지는 중!", "기초 공사 중... 곧 올라갑니다!"
  - `20~40%` — "슬슬 속도가 붙기 시작합니다!", "꾸준함이 최고의 무기!"
  - `40~60%` — "절반 지났어요! 페이스 유지!", "반환점을 돌았습니다, 이제 내리막길!"
  - `60~80%` — "끝이 보이기 시작합니다!", "마무리가 중요해요, 집중!"
  - `80~99%` — "거의 다 왔어요! 라스트 스퍼트!", "손에 잡힐 듯! 조금만 더!"
  - `100%` — "완벽합니다! 수고하셨습니다!", "모든 씬 완료! 대단해요!"
- [ ] **메시지 풀(Pool)**: 각 구간별 5~10개 메시지, 랜덤 선택
  - 같은 메시지가 연속으로 뜨지 않도록 이전 메시지 기억
- [ ] **애니메이션**: 메시지 변경 시 fade-in 트랜지션
- [ ] **커스텀 메시지 추가 가능**: 설정에서 직접 메시지 추가/편집 (향후)

```
위젯 디자인:
  ┌───────────────────────┐
  │  전체 진행률            │
  │  ████████████░░░ 67%  │
  │                       │
  │  "끝이 보이기 시작합니다! │
  │   마무리가 중요해요 💪"  │
  └───────────────────────┘
```

### 7-4. 전체 UI 통일성 & 세련된 폴리시 `P7`

> 난이도: ●●○ | 참고: Linear, Notion, Arc Browser

- [ ] **디자인 토큰 통일**: 전체 뷰에 걸쳐 일관된 spacing, radius, shadow, typography
  - 현재 산발적인 `text-xs`, `text-sm` → 체계적인 타이포그래피 스케일
  - 일관된 `rounded-lg` / `rounded-xl` / `shadow-sm` 사용 규칙
- [ ] **트랜지션 통일**: 모든 인터랙션에 일관된 ease, duration
  - 호버: `transition-all duration-150 ease-out`
  - 모달/팝오버 진입: `duration-200` / 퇴장: `duration-150`
  - 페이지 전환: `framer-motion` 페이드 + 슬라이드
- [ ] **글래스모피즘 요소 적용**: 모달, 드롭다운, 툴바 등에 미세한 글래스 효과
  - 과하지 않게, 포인트 요소에만 (모달 배경, 사이드바 하이라이트 등)
- [ ] **마이크로 인터랙션 보강**: 버튼 클릭 피드백, 토글 전환 애니메이션, 로딩 스켈레톤
- [ ] **다크 모드 최적화**: 현재 다크 테마 컬러의 대비·가독성 재점검

```
폴리시 체크리스트:
  □ 사이드바 hover/active 상태 일관성
  □ 카드 hover shadow 통일
  □ 폼 input focus ring 색상 통일
  □ 버튼 variant (primary/secondary/ghost) 정리
  □ 빈 상태(empty state) 일러스트 + 안내 문구
  □ 로딩 스켈레톤 (Shimmer) 적용
  □ 토스트/알림 디자인 통일
```

### 7-5. 스포트라이트 검색 `P7`

> 난이도: ●●● | 참고: macOS Spotlight, Raycast, VS Code Command Palette

- [ ] **Ctrl+Space 단축키**: 어디서든 스포트라이트 검색창 호출
  - 전역 키보드 이벤트 리스너 (Electron globalShortcut 또는 window keydown)
- [ ] **검색 UI 애니메이션**:
  - 배경: `backdrop-filter: blur(12px)` + 살짝 어두워짐 (`bg-black/30`)
  - 검색창이 **위에서 아래로** 내려오면서 **좌우로 넓어지는** 애니메이션
  - framer-motion: `initial={{ y: -40, width: '60%', opacity: 0 }}` → `animate={{ y: 0, width: '100%', opacity: 1 }}`
  - 글래스모피즘 검색 바: 반투명 + blur + 미세한 보더
- [ ] **검색 대상**: 앱 내 모든 데이터를 빠르게 검색
  - 씬번호 (예: `a015` → 해당 씬으로 이동)
  - 담당자 이름 (예: `김하늘` → 해당 담당자 씬 필터)
  - 메모 내용 (예: `수정필요` → 해당 메모가 포함된 씬 목록)
  - 에피소드/파트 (예: `EP03 B` → 해당 파트로 이동)
  - 빠른 액션 (예: `씬 추가` → 씬 추가 폼 열기)
- [ ] **검색 결과 UI**:
  - 카테고리별 그룹핑 (씬, 담당자, 메모, 액션)
  - 키보드 ↑↓ 선택 + Enter로 이동
  - 최근 검색 히스토리 표시
  - 결과 미리보기 (씬 → 썸네일 + 진행률, 담당자 → 씬 수 요약)
- [ ] **퍼지 검색**: 오타 허용 검색 (예: `a01` → `a001`, `a010`, `a011` 등)

```
검색 UI:
  ┌─────────────────────────────────────────┐
  │ 🔍 검색...                    ⌘ Space   │  ← 글래스 효과 검색 바
  ├─────────────────────────────────────────┤
  │ 씬                                      │
  │   📋 a015 — EP03 B파트 (김하늘)    67%  │
  │   📋 a016 — EP03 B파트 (원동우)    33%  │
  │ 담당자                                   │
  │   👤 김하늘 — 12씬 담당 (평균 58%)      │
  │ 메모                                    │
  │   📝 "배경 수정필요" — a003             │
  └─────────────────────────────────────────┘
       ↑ 뒤에 블러 + 어두운 오버레이
```

---

## 구현 우선순위 총정리

> **2026-02-21 기준**: Phase 1~2 완료 후, Phase 6(멀티 부서 확장)을 우선 진행하기로 결정.
> Phase 3~5는 Phase 6 이후 또는 필요시 병행.

### 완료된 항목 (Phase 1~2)

| 항목 | 페이즈 | 난이도 | 상태 |
|------|--------|--------|------|
| 버전 표기 시스템 | P1 | ●○○ | ✅ 완료 |
| 씬 목록 정렬/필터 개선 | P1 | ●●○ | ✅ 완료 |
| 씬번호 입력 개선 | P1 | ●●○ | ✅ 완료 |
| 레이아웃별 씬 그룹핑 | P1 | ●●● | ✅ 완료 |
| 이미지 업로드/미리보기 | P2 | ●●● | ✅ 완료 |
| 진행률 100% 애니메이션 | P2 | ●○○ | ✅ 완료 |
| 이미지 비교 뷰 | P2 | ●●○ | ✅ 완료 |

### 다음 착수: Phase 6 (멀티 부서 확장) ⭐

| 순위 | 항목 | 세부 | 난이도 | 상태 |
|------|------|------|--------|------|
| 1 | **6-1. 부서(Department) 개념 도입** | 타입 시스템 + 부서 전환 UI | ●●● | ▶ 다음 |
| 2 | **6-2. 데이터 소스 구조 설계** | 시트 이름 확장 + GAS 업데이트 | ●●○ | 대기 |
| 3 | **6-4. 액팅 씬 관리** | BG 로직 확장 재사용 | ●●○ | 대기 |
| 4 | **6-3. 대시보드 멀티 부서 위젯** | BG+액팅+통합 진행률 | ●●○ | 대기 |
| 5 | **6-5. 컴포지팅** | 향후 결정 | 미정 | 대기 |

### 이후 진행 (Phase 3~5, 7)

| 순위 | 항목 | 페이즈 | 난이도 | 비고 |
|------|------|--------|--------|------|
| 6 | 태그/확인요청 버튼 | P3 | ●●○ | 협업 핵심 |
| 7 | 슬랙 웹훅 연동 | P3 | ●●● | 알림 자동화 |
| 8 | 커스텀 파이프라인 단계 | P5 | ●●● | 부서별 단계 커스텀 |
| 9 | 에피소드별 현황 뷰 | P4 | ●●○ | PD/감독 뷰 |
| 10 | 인원별 태스크 뷰 | P4 | ●●○ | 개인 현황 |
| 11 | 메인 대시보드 강화 | P4 | ●●○ | 세부 진행률 |
| 12 | 캘린더/간트 뷰 | P4 | ●●● | 일정 관리 |
| 13 | 동기화 최적화 | P5 | ●●○ | 성능/안정성 |
| 14 | 위젯 레이아웃 편집 | P7 | ●●● | iPhone wiggle |
| 15 | AOT 플로팅 위젯 | P7 | ●●● | 글래스 효과 |
| 16 | 진행률 동기부여 메시지 | P7 | ●○○ | 재미 요소 |
| 17 | 전체 UI 통일성 & 폴리시 | P7 | ●●○ | 시각적 완성도 |
| 18 | 스포트라이트 검색 | P7 | ●●● | Ctrl+Space |

---

## 아키텍처 고려사항

### 코드 유지보수 원칙

1. **서비스 레이어 분리**: 모든 데이터 조작은 `services/` 통해서만 (뷰에서 직접 API 호출 금지)
2. **낙관적 업데이트 패턴 통일**: 모든 CRUD는 `store.xxxOptimistic()` → 백그라운드 동기화
3. **타입 안전성**: 새 필드/단계 추가 시 `types/index.ts`에서 시작하여 컴파일 에러로 가이드
4. **컴포넌트 재사용**: 씬 카드, 프로그레스 바, 필터 칩 등 `components/ui/`에 분리
5. **테스트 모드 동등성**: 모든 기능은 테스트 모드에서도 100% 동작해야 함

### 파일 구조 확장 계획

```
src/
├── components/
│   ├── ui/           ← 공통 UI (Button, Modal, Tag, ProgressBar...)
│   ├── scenes/       ← 씬 관련 (SceneCard, SceneForm, ImagePreview...)
│   ├── layout/       ← 레이아웃 (MainLayout, Sidebar, Header)
│   └── widgets/      ← 대시보드 위젯
├── views/
│   ├── Dashboard.tsx
│   ├── ScenesView.tsx
│   ├── EpisodeView.tsx     ← P4 신규
│   ├── CalendarView.tsx    ← P4 신규
│   ├── AssigneeView.tsx    ← P4 신규
│   └── SettingsView.tsx
├── components/
│   └── spotlight/
│       └── SpotlightSearch.tsx  ← P7 스포트라이트 검색
├── services/
│   ├── sheetsService.ts      ← GAS 연동
│   ├── testSheetService.ts   ← 테스트 모드
│   ├── imageService.ts       ← P2 이미지 업로드/캐싱
│   ├── slackService.ts       ← P3 슬랙 웹훅
│   └── settingsService.ts
├── stores/
│   ├── useDataStore.ts       ← 에피소드/씬 데이터 + 낙관적 업데이트
│   ├── useAppStore.ts        ← UI 상태 (뷰, 필터, 연결상태)
│   ├── useNotificationStore.ts  ← P3 알림 상태
│   ├── useDepartmentStore.ts  ← P6 부서별 설정/상태
│   └── useWidgetStore.ts     ← P7 위젯 레이아웃/AOT 상태
├── types/
│   └── index.ts              ← 모든 타입 정의 (Stage, Scene, Episode, Department...)
└── utils/
    ├── calcStats.ts
    ├── cn.ts
    └── formatters.ts         ← 날짜, 숫자 포맷 유틸
```

---

## 참고한 도구 및 UX 패턴

| 도구 | 주요 참고 패턴 |
|------|--------------|
| **ShotGrid** (Autodesk) | 리스트/썸네일/디테일 3단 뷰 토글, 캔버스 대시보드, 간트 리소스 플래닝 |
| **ftrack** | 멀티레벨 그룹핑, 오버레이 이미지 비교, 칸반 태스크 보드, 워크플로 스키마 |
| **Kitsu** (CGWire) | 상태 매트릭스 뷰, 클립보드 붙여넣기, 네이티브 Slack 연동, 간트 자동생성, 쿼터 추적 |
| **Asana** | 선택적 완료 축하 애니메이션 (비차단, 토글 가능) |
| **Linear** | 미니멀 UI, 키보드 단축키 중심, 빠른 상태 전환 |
| **iOS 홈 화면** | 위젯 편집 wiggle 애니메이션, 위젯 추가/제거 UX |
| **macOS Spotlight** | Ctrl+Space 글로벌 검색, 블러 배경, 카테고리별 결과 |
| **Raycast** | 검색 + 빠른 액션, 퍼지 매칭, 키보드 네비게이션 |
| **Windows 위젯** | AOT 바탕화면 위젯, 글래스 효과, 프레임리스 윈도우 |
| **Duolingo** | 진행률별 격려 메시지, 게이미피케이션 |

---

*이 문서는 새 기능 기획/구현 시 매번 갱신하며, CLAUDE.md에서 참조합니다.*
